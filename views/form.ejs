<!DOCTYPE html>
<html>

<head>
  <title>Birthday Gift Form</title>
  <!-- <link rel="stylesheet" href="/style.css" /> -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">


</head>

<body>
  <!-- <div class="container">
    <h2>游꾸 Choose a Gift</h2>
    <form action="/submit" method="POST">
      <input type="text" name="name" placeholder="Your Name" required class="name-input"/>

      <div class="card-grid">
        <% products.forEach(p => { 
             const isTaken = taken.includes(p.name);
        %>
          <label class="card <%= isTaken ? 'disabled' : '' %>">
            <img src="<%= p.img %>" alt="<%= p.name %>" />
            <h3><%= p.name %></h3>
            <a href="<%= p.link %>" target="_blank">View Product</a>
            <% if (!isTaken) { %>
              <input type="radio" name="product" value="<%= p.name %>" required />
            <% } else { %>
              <div class="taken-text">游꾸 Already Taken</div>
            <% } %>
          </label>
        <% }) %>
      </div>

      <button type="submit">Submit</button>
    </form>
  </div> -->
  <div class="container mt-5">
    <h2 class="mb-4 text-center">游꾸 Choose a Gift</h2>
    <form action="/submit" method="POST">
      <div class="mb-3 text-center">
        <input type="text" name="name" placeholder="Your Name" required class="form-control w-50 mx-auto" />
      </div>

      <div class="row">
        <% products.forEach(p=> {
          const isTaken = taken.includes(p.name);
          %>
          <div class="col-md-4 mb-4">
            <label class="card h-100 text-center <%= isTaken ? 'border-secondary opacity-50' : '' %> p-3">
              <img src="<%= p.img %>" alt="<%= p.name %>" class="card-img-top"
                style="max-height: 200px; object-fit: contain;" />
              <div class="card-body">
                <h5 class="card-title">
                  <%= p.name %>
                </h5>
                <a href="<%= p.link %>" target="_blank" class="btn btn-sm btn-outline-primary mb-2">View Product</a>
                <% if (!isTaken) { %>
                  <div>
                    <input type="radio" name="product" value="<%= p.name %>" required />
                  </div>
                  <% } else { %>
                    <div class="text-danger fw-bold mt-2">游꾸 Already Taken</div>
                    <% } %>
              </div>
            </label>
          </div>
          <% }) %>
      </div>

      <div class="text-center mt-4">
        <button type="submit" class="btn btn-success">Submit</button>
      </div>
    </form>
  </div>



  <script>
    // Highlight selected card
    document.addEventListener("DOMContentLoaded", () => {
      const cards = document.querySelectorAll(".card input[type='radio']");
      cards.forEach(radio => {
        radio.addEventListener("change", () => {
          document.querySelectorAll(".card").forEach(c => c.classList.remove("selected"));
          radio.closest(".card").classList.add("selected");
        });
      });
    });
  </script>
</body>

</html>